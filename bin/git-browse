#!/usr/bin/env python

import sys
import os
import argparse
import textwrap

sys.path.append(os.path.join(os.path.dirname(__file__), '..'))

from gitbrowse.browser import GitBrowser
from gitbrowse import git


parser = argparse.ArgumentParser(add_help=False)
parser.add_argument('rev', nargs='?', default='HEAD')
parser.add_argument('file')
args = parser.parse_args()

if not git.verify_revision(args.rev):
    sys.exit(1)

if not git.verify_file(args.file):
    sys.exit("'%s' either does not exist, or is not tracked by git" % (
        args.file
    ))

browser = GitBrowser(args.file, args.rev)
browser.run()
